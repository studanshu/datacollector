
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="Metric rules and alerts provide notifications about real-time statistics for pipelines. When Data Collector runs a pipeline, the console displays the pipeline in Monitor mode and displays real-time ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="concept"></meta><meta name="DC.Title" content="Metric Rules and Alerts"></meta><meta name="abstract" content="Metric rules and alerts provide notifications about real-time statistics for pipelines."></meta><meta name="description" content="Metric rules and alerts provide notifications about real-time statistics for pipelines."></meta><meta name="DC.Relation" scheme="URI" content="../Alerts/RulesAlerts_title.html"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="concept_abj_nsk_zq"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Metric Rules and Alerts</title><!--  Generated with Oxygen version 17.1, build number 2016020417.  --><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/skins/skin.css"><!----></link><link rel="stylesheet" type="text/css" href="../skin.css"></link><script type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><!--
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--></head>
<body onload="highlightSearchTerm()" class="frmBody"><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
​
  ga('create', 'UA-53969024-1', 'auto');
  ga('send', 'pageview');
​
</script>
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="../Alerts/RulesAlerts_title.html" title="Rules and Alerts">Rules and Alerts</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="../Alerts/RulesAlerts_title.html" title="Rules and Alerts"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Rules and Alerts</span></a></span>  </div></td></tr></tbody></table>
<div class="nested0" id="concept_abj_nsk_zq">
 <h1 class="title topictitle1">Metric Rules and Alerts</h1>

 
 <div class="body conbody"><p class="shortdesc">Metric rules and alerts provide notifications about real-time statistics for
    pipelines.</p>

  <p class="p">When <span class="ph">Data
                  Collector</span> runs a
      pipeline, the console displays the pipeline in Monitor mode and displays real-time statistics
      about the pipeline. You can define and enable metric rules so that you are sent an alert when
      a statistic reaches a certain threshold. </p>

    <p class="p">For example, the Record Count and Record Throughput statistics in Monitor mode display the
      number of input, output, and error records that the pipeline has processed:</p>

    <p class="p"><img class="image" id="concept_abj_nsk_zq__image_h55_gc1_qv" src="../Graphics/MetricStatistics.png" height="185" width="469"></img></p>

    <p class="p">You can view the number of error records in these statistics. However, you might want to be
      notified when the number of error records reaches a certain threshold. You can enable the
      default rule for the Pipeline Batch Error Records Meter metric to send an alert when the
      pipeline encounters more than 100 error records. When you enable the metric rule and the alert
      triggers, the alert displays in the <span class="ph">Data
                  Collector</span> console as
      follows: </p>

    <p class="p"><img class="image" id="concept_abj_nsk_zq__image_ukv_rf1_qv" src="../Graphics/MetricAlert.png" height="282" width="563"></img></p>

    <p class="p">When you enable a metric rule, it automatically enables an alert for the rule that displays
      in the console. You can also configure a metric rule to send email alerts to all email
      addresses associated with the pipeline. </p>

    <p class="p">You configure metric rules when you configure or monitor the pipeline. <span class="ph">Data
                  Collector</span> provides a
      set of default metric rules that you can edit and enable for any pipeline. Metric rules take
      effect after you enable them.</p>

    <p class="p">You can also create custom metric rules. When you create a custom metric rule, you select the
      metric type. The metric type determines which statistic triggers the alert. You configure the
      condition that triggers the alert, and enter the text to display in the alert.</p>

 </div>

<div class="related-links"></div>
<div class="topic concept nested1" id="concept_aq1_5lf_qv">
 <h2 class="title topictitle2">Default Metric Rules</h2>

 
 <div class="body conbody"><p class="shortdesc"><span class="ph">Data
                  Collector</span>
        provides a set of default metric rules that you can edit and enable for any
        pipeline.</p>

        <p class="p">You might want to edit a default metric rule to modify the alert text or the condition
            for the rule. By default, none of the rules are enabled. Select
                <span class="ph uicontrol">Active</span> to enable a rule. </p>

        <p class="p">Data
            Collector provides the following default metric rules:</p>

        <img class="image" id="concept_aq1_5lf_qv__image_gjs_zlf_qv" src="../Graphics/MetricDefaultRules.png" height="199" width="498"></img>
    </div>

</div>
<div class="topic concept nested1" id="concept_y4d_tcw_1r">
 <h2 class="title topictitle2">Metric Types</h2>

 
 <div class="body conbody"><p class="shortdesc">You can use different metric types when you create a metric rule. The metric type
        determines which statistic triggers the alert. </p>

  <p class="p">After
            selecting a metric type, you select the metric ID which specifies the metric to use. For
            example, a metric ID can be a runtime statistics gauge or a batch input records meter.
            You then select the metric element that defines what the metric is measuring. A metric
            element can be a count, rate, median, minimum, maximum, or percentage. The possible
            metric ID and metric element vary by metric type. </p>

 </div>

<div class="topic concept nested2" id="concept_ky2_g4f_qv">
 <h3 class="title topictitle3">Gauge</h3>

 
 <div class="body conbody"><p class="shortdesc">The gauge metric type provides alerts based on the age of the current batch, the amount
        of time a stage takes to process a batch, or the time that <span class="ph">Data
                  Collector</span> last
        received a record from the origin.</p>

        <p class="p">The gauge metric type provides alerts
            about some of the Runtime Statistics displayed in Monitor mode:</p>

        <img class="image" id="concept_ky2_g4f_qv__image_r5z_hpf_qv" src="../Graphics/MetricGauge.png" height="280" width="242"></img>
        <div class="p">The gauge metric type includes a single metric ID, Runtime Statistics Gauge. You can
            configure the alert to trigger on the following metric elements:<ul class="ul" id="concept_ky2_g4f_qv__ul_d1h_kqf_qv">
                <li class="li">Current Batch Age</li>

                <li class="li">Time in Current Stage</li>

                <li class="li">Time of Last Received Record</li>

            </ul>
</div>

        <p class="p">For example, you can configure a gauge metric rule that triggers an alert when the
            pipeline has been processing a batch for more than 5 minutes.</p>

    </div>

</div>
<div class="topic concept nested2" id="concept_ov2_vvf_qv">
 <h3 class="title topictitle3">Counter</h3>

 
 <div class="body conbody"><p class="shortdesc">The counter metric type provides alerts based on the memory usage for the pipeline or
        for a stage in the pipeline.</p>

        <p class="p">The counter metric type provides alerts
            about the Stage Heap Memory Usage statistics displayed in Monitor mode for the pipeline
            or the Heap Memory Usage statistics displayed in Monitor mode for the pipeline or for a
            stage:</p>

        <img class="image" id="concept_ov2_vvf_qv__image_zqq_np3_fw" src="../Graphics/MetricCounter.png" height="325" width="569"></img>
        <div class="p">The counter metric type includes the following metric IDs:<ul class="ul" id="concept_ov2_vvf_qv__ul_lqs_4wf_qv">
                <li class="li">Pipeline Memory Consumption Counter (MB) - Amount of memory being consumed by
                    the pipeline.</li>

                <li class="li">&lt;stage_name&gt; Heap Memory Usage Counter (MB) - Amount of memory being consumed
                    by the named stage.</li>

            </ul>
</div>

        <p class="p">For either of the selected metric IDs, you can configure the alert to trigger on the
            count metric element.</p>

        <p class="p">For example, you can configure a counter metric rule that triggers an alert when a stage
            uses 65% of the Java heap size allocated to <span class="ph">Data
                  Collector</span>.</p>

    </div>

</div>
<div class="topic concept nested2" id="concept_e3p_pxf_qv">
 <h3 class="title topictitle3">Histogram</h3>

 
 <div class="body conbody"><p class="shortdesc">The histogram metric type provides alerts based on a histogram of different record types
        and stage errors for the pipeline or for a stage in the pipeline.</p>

        <p class="p">The histogram metric type provides
            alerts about the Records Per Batch Histogram statistics displayed in Monitor mode for
            the pipeline or for a stage:</p>

        <img class="image" id="concept_e3p_pxf_qv__image_emj_ddg_qv" src="../Graphics/MetricHistogram.png" height="180" width="244"></img>
        <p class="p">The histogram metric type includes metric IDs for the input records, output records,
            error records, or stage errors for the pipeline or for a stage in the pipeline. You can
            configure the alert to trigger on the metric elements displayed in the monitoring
            histogram: mean, standard deviation, percentage, or count.</p>

        <p class="p">For example, you can configure a histogram metric rule that triggers an alert when the
            mean of all input records processed by the pipeline reaches 10,000.</p>

    </div>

</div>
<div class="topic concept nested2" id="concept_d3x_d2g_qv">
 <h3 class="title topictitle3">Meter</h3>

 
 <div class="body conbody"><p class="shortdesc">The meter metric type provides alerts based on rates of different record types and stage
        errors for pipeline batches or for a stage in the pipeline. </p>

        <p class="p">The meter metric type can provide alerts
            about the number of batches processed by the pipeline. The meter metric type can also
            provide alerts about the Record Count and Record Throughput statistics displayed in
            Monitor mode for the pipeline or for a stage:</p>

     <p class="p"><img class="image" id="concept_d3x_d2g_qv__image_h55_gc1_qv" src="../Graphics/MetricStatistics.png" height="185" width="469"></img></p>

        <p class="p">The meter metric type includes metric IDs for the pipeline batch count and for the input
            records, output records, error records, or stage errors for the pipeline or for a stage
            in the pipeline. You can configure the alert to trigger on the following metric elements
            displayed in the Record Count and Record Throughput statistics: count, time rates, or
            mean.</p>

        <p class="p">For example, you can configure a meter metric rule that triggers an alert when the number
            of output records that a stage processes reaches 5,000.</p>

    </div>

</div>
<div class="topic concept nested2" id="concept_j5r_xhg_qv">
 <h3 class="title topictitle3">Timer</h3>

 
 <div class="body conbody"><p class="shortdesc">The timer metric type provides alerts based on batch processing timers for the pipeline
        or for a stage in the pipeline.</p>

        <p class="p">The timer metric type provides alerts
            about the Batch Throughput and Batch Processing Timer statistics displayed in Monitor
            mode for the pipeline or for a stage:</p>

        <img class="image" id="concept_j5r_xhg_qv__image_fsb_llg_qv" src="../Graphics/MetricTimer.png" height="182" width="452"></img>
        <div class="p">The timer metric type includes the following metric IDs:<ul class="ul" id="concept_j5r_xhg_qv__ul_uxn_4lg_qv">
                <li class="li">Pipeline Batch Processing Timer - Amount of time for the pipeline to process a
                    batch.</li>

                <li class="li">&lt;stage_name&gt; Batch Processing Timer - Amount of time for a stage to process a
                    batch.</li>

            </ul>
</div>

        <p class="p">You can configure the alert to trigger on the following metric elements displayed in the
            Batch Processing Timer statistics: mean, standard deviation, percentage, time rates, or
            count.</p>

        <p class="p">For example, you can configure a timer metric rule that triggers an alert when the mean
            amount of time that the pipeline takes to process a batch reaches 10 minutes.</p>

    </div>

</div>
</div>
<div class="topic concept nested1" id="concept_qyv_1tf_qv">
 <h2 class="title topictitle2">Metric Conditions</h2>

 
 <div class="body conbody"><p class="shortdesc">When you configure a metric rule, you configure the condition that defines the threshold
        at which the metric rule triggers an alert. Use the expression language to configure the
        condition. </p>

        <p class="p">The expression language provides the following functions for creating metric rule
            conditions:</p>

        <dl class="dl">
            
                <dt class="dt dlterm">value()</dt>

                <dd class="dd">Returns the value of the current metric selected in the metric rule. Use in
                    conditions for any type of metric rule.<div class="p">For example, the default rule for the
                        Pipeline Batch Error Records Meter metric includes the following
                        condition:<pre class="pre codeblock">${value() &gt; 100}</pre>
</div>
<p class="p">The alert is
                        tiggered when the pipeline encounters more than 100 error records.</p>
</dd>

            
            
                <dt class="dt dlterm">time.now()</dt>

                <dd class="dd">Returns the current time of the Data Collector machine as a java.util.Date
                    object. Use in conditions for gauge metric rules.<div class="p">For example, the default
                        rule for the Runtime Statistics Gauge metric that checks whether the
                        pipeline is idle includes the following
                        condition:<pre class="pre codeblock">${time:now() - value() &gt; 120000}</pre>
</div>
<p class="p">The
                        alert is triggered when the current time is greater than the time of the
                        last received record by 120,000 milliseconds.</p>
</dd>

            
            
                <dt class="dt dlterm">jvm:maxMemoryMB()</dt>

                <dd class="dd">Returns the Java heap size allocated to <span class="ph">Data
                  Collector</span> in MB. Use in conditions for counter metric rules.<div class="p">For example, the default
                        rule for the Pipeline Memory Consumption Counter metric includes the
                        following
                        condition:<pre class="pre codeblock">${value() &gt; (jvm:maxMemoryMB() * 0.65)}</pre>
</div>
<p class="p">The
                        alert is triggered when the pipeline uses 65% of the Java heap size
                        allocated to <span class="ph">Data
                  Collector</span>.</p>
</dd>

            
        </dl>

 </div>

</div>
<div class="topic task nested1" id="task_hcf_11k_br">
    <h2 class="title topictitle2">Configuring a Metric Rule and Alert</h2>

    
    <div class="body taskbody"><p class="shortdesc">Create a custom metric rule to receive alerts when a real-time statistic reaches a
        certain threshold. You can create metric rules and alerts when you configure or monitor a
        pipeline. You can edit or delete metric rules when they are not enabled. </p>

        <div class="section context">Configure metric rules based on the
            metric type, the metric, an element associated with the metric, and a condition. </div>

        <ol class="ol steps" id="task_hcf_11k_br__steps_jzm_f1k_br"><li class="li step stepexpand">
                <span class="ph cmd">In the Properties panel or Monitor panel, click the <span class="ph uicontrol">Metric
                        Rules</span> tab, and click the <span class="ph uicontrol">Add</span> icon.</span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">In the <span class="keyword wintitle">Metric Rule</span> dialog box, configure the following
                    properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_hcf_11k_br__table_lcs_4bk_br" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr class="row">
                                    <th class="entry" valign="top" width="30%" id="d6068e459">Metric Rule Property</th>

                                    <th class="entry" valign="top" width="70%" id="d6068e462">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d6068e459 ">Alert Text</td>

                                    <td class="entry" valign="top" width="70%" headers="d6068e462 ">Text to display when the alert is triggered. <p class="p">Enter
                                            text that explains the reason for the alert. For
                                            example, "Over 1000 pipeline error records."</p>
</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d6068e459 ">Metric Type <a class="xref" href="MetricAlerts.html#concept_y4d_tcw_1r" title="You can use different metric types when you create a metric rule. The metric type determines which statistic triggers the alert.">
                                            <img class="image" src="../Graphics/icon_moreInfo.png" height="12" width="12"></img></a>
                                    </td>

                                    <td class="entry" valign="top" width="70%" headers="d6068e462 ">Type of metric information the alert is based on:<ul class="ul" id="task_hcf_11k_br__ul_fwn_zbk_br">
                                            <li class="li">Gauge</li>

                                            <li class="li">Counter</li>

                                            <li class="li">Histogram</li>

                                            <li class="li">Meter</li>

                                            <li class="li">Timer</li>

                                        </ul>
</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d6068e459 ">Metric ID</td>

                                    <td class="entry" valign="top" width="70%" headers="d6068e462 ">Metric to use. Provides a list of available metrics based
                                        on the metric type. </td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d6068e459 ">Metric Element</td>

                                    <td class="entry" valign="top" width="70%" headers="d6068e462 ">Metric element to use. Provides a list of available
                                        elements based on the metric ID.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d6068e459 ">Condition
                                        <a class="xref" href="MetricAlerts.html#concept_qyv_1tf_qv" title="When you configure a metric rule, you configure the condition that defines the threshold at which the metric rule triggers an alert. Use the expression language to configure the condition.">
                                            <img class="image" src="../Graphics/icon_moreInfo.png" height="12" width="12"></img></a>
                                    </td>

                                    <td class="entry" valign="top" width="70%" headers="d6068e462 ">Condition to trigger the alert. Use the expression
                                        language to configure the condition. </td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d6068e459 ">Send Email</td>

                                    <td class="entry" valign="top" width="70%" headers="d6068e462 ">Sends an email when the alert is triggered. <p class="p">To send an
                                            email, add email addresses for alerts and configure the
                                            Data Collector email properties.</p>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Click <span class="ph uicontrol">Save</span>.</span>
                <div class="itemgroup info">The new metric rule displays in the list. </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To enable the rule, select <span class="ph uicontrol">Active</span>.</span>
                <div class="itemgroup info">You can enable and disable email alerts from the list of rules. </div>
            </li>
</ol>

    </div>

    <div class="related-links"><div class="relinfo"><strong>Related information</strong><br xmlns="http://www.w3.org/1999/xhtml" />
<div class="related_link"><a class="navheader_parent_path" href="../Expression_Language/ExpressionLanguage_overview.html#concept_p54_4kl_vq" title="The following tables include some examples of how you might use expressions in the Data Collector.">Expression Language</a></div>
<div class="related_link"><a class="navheader_parent_path" href="EmailforAlerts-Configuring.html#task_f3v_1hw_1r" title="You can define the email addresses to receive metric and data alerts. When an alert triggers an email, the Data Collector sends an email to every address in the list.">Configuring Email for Alerts</a></div>
</div>
</div>
</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Alerts/RulesAlerts_title.html" title="Rules and Alerts"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Rules and Alerts</span></a></span>  </div>
</body>
</html>